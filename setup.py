# http://www.packtpub.com/article/writing-a-package-in-pythonfrom setuptools import setup, Command# adapted from Apache libcloud setup.pyclass DocsCommand(Command):    description = "generate API documentation"    user_options = []    def initialize_options(self):        pass    def finalize_options(self):        pass    def run(self):        import os        import pydoc        todo = []        pydoc.writedoc('fgcp')        todo.append('fgcp')        for root, dirs, files in os.walk('fgcp'):            for name in files:                if name.startswith('__'):                    continue                if name.endswith('.pyc'):                    continue                modname = 'fgcp.%s' % name.replace('.py', '')                pydoc.writedoc(modname)                todo.append(modname)        import re        # replace file:/// link with link to google code        def clean_link(match):            link = match.group(1).split('/').pop()            return '"http://code.google.com/p/fgcp-client-api/source/browse/fgcp/%s"' % link        p1 = re.compile('"(file:[^"]+)"')        # replace c:\... file with local file        def clean_file(match):            name = match.group(1).split('\\').pop()            return '>%s<' % name        p2 = re.compile('>(\w:[^<]+)<')        for modname in todo:            filename = modname + '.html'            print filename            f = open(filename)            lines = f.read()            f.close()            lines = p1.sub(clean_link, lines)            lines = p2.sub(clean_file, lines)            # write new file in docs            f = open(os.path.join('docs', filename), 'w')            f.write(lines)            f.close()class Pep8Command(Command):    description = "run pep8 script"    user_options = []    def initialize_options(self):        pass    def finalize_options(self):        pass    def run(self):        import sys        try:            import pep8            pep8        except ImportError:            print ('Missing "pep8" library. You can install it using pip: '                  'pip install pep8')            sys.exit(1)        import os        import subprocess        cwd = os.getcwd()        retcode = subprocess.call(('pep8 --show-source --ignore=E501 --filename=*.py %s/fgcp/ %s/tests/' %                (cwd, cwd)).split(' '))        sys.exit(retcode)f = open('README.txt')long_description = f.read()f.close()setup(    name='fgcp-client-api',    description='Client API Library for the Fujitsu Global Cloud Platform (FGCP)',    version='0.9.0',    author='mikespub',    author_email='fgcp@mikespub.net',    packages=['fgcp'],    license='Apache License 2.0',    url='http://code.google.com/p/fgcp-client-api/',    long_description=long_description,    entry_points = {        'distutils.commands': [            'docs = DocsCommand'        ]    },    cmdclass={        'docs': DocsCommand,        'pep8': Pep8Command,    },    classifiers=[        'Topic :: Software Development :: Libraries :: Python Modules',        'Environment :: Console',        'Environment :: Web Environment',        'Development Status :: 4 - Beta',        'Intended Audience :: System Administrators',        'Intended Audience :: Developers',        'License :: OSI Approved :: Apache Software License',        'Operating System :: OS Independent',        'Programming Language :: Python',    ])